Тестовое задание на Senior разработчика
Цель
Разработать приложение Django для простой системы, похожей на блог, с пользователями, сообщениями, комментариями и тегами.
Описание задачи
Создать приложение Django со следующими моделями и реализовать требуемую функциональность.
Модели
Пользователь
имя пользователя
email
created_at
Пост
title
content
author
published_at
tags (ManyToManyField для тега)
likes (PositiveIntegerField)
Комментарий
post
user
content
created_at
Тег
name (CharField, max_length=50, unique)
Требования:
1. Методы модели и запросы
Извлечение лучших постов с наибольшим количеством комментариев: напишите метод модели в модели Post для извлечения 5 лучших постов с наибольшим количеством комментариев.
Извлечение всех постов определенного пользователя, опубликованных за последний месяц: напишите метод queryset в модели Post, который принимает User и возвращает все созданные им посты, опубликованные за последние 30 дней.
Извлечение постов с определенным тегом и количеством лайков больше определенного значения: реализуйте метод queryset, который возвращает все посты, содержащие определенный тег и имеющие количество лайков больше заданного значения.
Подсчет общего количества комментариев к посту: используйте функцию аннотации ORM Django для подсчета количества комментариев к посту и возврата этой информации в запросе.
2. Производительность и оптимизация
Оптимизация запроса N+1 для сведений о посте: при извлечении списка постов обязательно оптимизируйте запрос, чтобы сократить количество запросов N+1 (извлечение постов, их авторов и тегов в одном запросе).
Массовое обновление лайков: реализация метода, который обновляет количество лайков для списка постов массово с помощью bulk_update. Например, увеличьте количество лайков для пакета постов на определенное число.
3. Бонусные задания (необязательно)
Создание настраиваемого менеджера для активных пользователей: создание настраиваемого менеджера для модели User, который фильтрует пользователей, у которых есть хотя бы один пост за последние 60 дней.
Создание действия администратора Django: реализация настраиваемого действия администратора, позволяющего администраторам отмечать несколько постов как опубликованные и устанавливать дату published_at на текущее время.
Реализуйте необработанный запрос: напишите пользовательский метод с использованием raw() Django для извлечения 5 лучших постов по количеству комментариев без использования методов агрегации ORM Django.
